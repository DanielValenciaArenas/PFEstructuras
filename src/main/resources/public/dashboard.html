<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"><title>Dashboard</title>
    <link rel="stylesheet" href="/public/css/estilos.css">
    <script src="/public/js/auth.js"></script>
</head>
<body>
<script>renderHeader('Dashboard'); requireRole(['ADMIN']);</script>

<main class="container">
    <section class="grid">
        <div class="card"><h3>Ubicaciones LEVE</h3><div id="lev" class="mt"></div></div>
        <div class="card"><h3>Ubicaciones MODERADO</h3><div id="mod" class="mt"></div></div>
        <div class="card"><h3>Ubicaciones GRAVE</h3><div id="gra" class="mt"></div></div>
        <div class="card"><h3>Total recursos</h3><div id="rec" class="mt"></div></div>
        <div class="card"><h3>Equipos de rescate</h3><div id="eq" class="mt"></div></div>
        <div class="card"><h3>Evacuaciones pendientes</h3><div id="pen" class="mt"></div></div>
    </section>
</main>

<script>
    async function cargar(){
      const r = await fetch('/api/resumen'); const d = await r.json();
      lev.textContent = d.ubicaciones.leve;
      mod.textContent = d.ubicaciones.moderado;
      gra.textContent = d.ubicaciones.grave;
      rec.textContent = d.recursos;
      eq.textContent  = d.equipos;
      pen.textContent = d.pendientes;
    }
    cargar();
</script>
</body>
</html>
